/** SASS for the <input> HTML element
 *
 * Found in scss/components/_group.scss#21: `input:not([type="checkbox"], [type="radio"]),`
 * Found in scss/components/_group.scss#48: `input:not([type="checkbox"], [type="radio"]),`
 * Found in scss/components/_group.scss#70: `input:not([type="checkbox"], [type="radio"]),`
 * Found in scss/components/_group.scss#76: `// Group box shadow when an input is focused`
 * Found in scss/components/_group.scss#77: `&:has(input:not([type="submit"], [type="button"]):focus, select:focus) {`
 * Found in scss/components/_group.scss#79: `#{\$css-var-prefix}group-box-shadow-focus-with-input`
 * Found in scss/components/_loading.scss#10: `#{\$parent-selector} [aria-busy="true"]:not(input, select, textarea, html, form) {`
 * Found in scss/components/_nav.scss#68: `input:not([type="checkbox"], [type="radio"], [type="range"], [type="file"]),`
 * Found in scss/components/_tooltip.scss#12: `&:not(a, button, input, [role="button"]) {`
 * Found in scss/forms/_basics.scss#6: `$helper-previous-tags: "input, select, textarea, fieldset";`
 * Found in scss/forms/_basics.scss#18: `#{\$parent-selector} input,`
 * Found in scss/forms/_basics.scss#30: `#{\$parent-selector} input {`
 * Found in scss/forms/_basics.scss#117: `// Force height for alternatives input types`
 * Found in scss/forms/_basics.scss#118: `#{\$parent-selector} input:not([type="checkbox"], [type="radio"], [type="range"]) {`
 * Found in scss/forms/_basics.scss#149: `#{\$parent-selector} input:not([type="checkbox"], [type="radio"]),`
 * Found in scss/forms/_basics.scss#157: `#{\$parent-selector} input:not([type="checkbox"], [type="radio"], [type="range"], [type="file"]),`
 * Found in scss/forms/_basics.scss#166: `#{\$parent-selector} input,`
 * Found in scss/forms/_basics.scss#192: `input:not(`
 * Found in scss/forms/_basics.scss#210: `input:not([type="submit"], [type="button"], [type="reset"], [role="switch"], [readonly]),`
 * Found in scss/forms/_basics.scss#219: `input:not(`
 * Found in scss/forms/_basics.scss#238: `#{\$parent-selector} input:not([type="submit"], [type="button"], [type="reset"])[disabled],`
 * Found in scss/forms/_basics.scss#244: `:is(input:not([type="submit"], [type="button"], [type="reset"]), select, textarea) {`
 * Found in scss/forms/_basics.scss#249: `#{\$parent-selector} label[aria-disabled="true"] input[disabled] {`
 * Found in scss/forms/_basics.scss#254: `#{\$parent-selector} :where(input, select, textarea) {`
 * Found in scss/forms/_basics.scss#361: `#{\$parent-selector} :where(input, select, textarea) {`
 * Found in scss/forms/_basics.scss#371: `#{\$parent-selector} input::placeholder,`
 * Found in scss/forms/_basics.scss#372: `#{\$parent-selector} input::-webkit-input-placeholder,`
 * Found in scss/forms/_basics.scss#374: `#{\$parent-selector} textarea::-webkit-input-placeholder,`
 * Found in scss/forms/_basics.scss#381: `#{\$parent-selector} input:not([type="checkbox"], [type="radio"]),`
 * Found in scss/forms/_basics.scss#467: `> :where(input, select, textarea) {`
 * Found in scss/forms/_input-color.scss#15: `@if map.get($modules, "forms/input-color") {`
 * Found in scss/forms/_input-date.scss#4: `@if map.get($modules, "forms/input-date") {`
 * Found in scss/forms/_input-date.scss#10: `#{\$parent-selector} input:not([type="checkbox"], [type="radio"], [type="range"], [type="file"]) {`
 * Found in scss/forms/_input-file.scss#4: `@if map.get($modules, "forms/input-file") {`
 * Found in scss/forms/_input-file.scss#10: `//    with the forced overflow hidden on the input[type="file"] element.`
 * Found in scss/forms/_input-range.scss#41: `@if map.get($modules, "forms/input-range") {`
 * Found in scss/forms/_input-search.scss#4: `@if map.get($modules, "forms/input-search") {`
 * Found in scss/forms/_input-search.scss#10: `#{\$parent-selector} input:not([type="checkbox"], [type="radio"], [type="range"], [type="file"]) {`
 * Found in scss/forms/_input-search.scss#46: `#{\$parent-selector} :where(input) {`
 * Add your styles here
 */

@use "sass:map";
@use "../settings" as *;

@if map.get($modules, "utilities/accessibility") {
  // User interaction
  // Remove the tapping delay in IE 10
  #{$parent-selector} input {
    -ms-touch-action: manipulation;
  }
}

@if map.get($modules, "forms/basics") {
  // Helper
  $helper-previous-tags: "input, select, textarea, fieldset";
  /**
   * Basics form elements
   */

  // Reboot based on :
  // - normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css
  // - sanitize.css v13.0.0 | CC0 1.0 Universal | github.com/csstools/sanitize.css
  // ––––––––––––––––––––

  // 1. Change the font styles in all browsers
  // 2. Remove the margin in Firefox and Safari
  #{$parent-selector} input {
    margin: 0; // 2
    font-size: 1rem; // 1
    line-height: var(#{$css-var-prefix}line-height); // 1
    font-family: inherit; // 1
    letter-spacing: inherit; // 2
    overflow: visible;
  }

  // Show the overflow in IE.

  // Remove the padding in IE 10
  #{$parent-selector} [type="checkbox"],
  #{$parent-selector} [type="radio"] {
    padding: 0;
  }

  // Correct the cursor style of increment and decrement buttons in Safari
  #{$parent-selector} ::-webkit-inner-spin-button,
  #{$parent-selector} ::-webkit-outer-spin-button {
    height: auto;
  }

  // 1. Correct the odd appearance in Chrome and Safari
  // 2. Correct the outline style in Safari
  #{$parent-selector} [type="search"] {
    -webkit-appearance: textfield; // 1
    outline-offset: -2px; // 2
  }

  // Remove the inner padding in Chrome and Safari on macOS
  #{$parent-selector} [type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
  }

  // 1. Correct the inability to style clickable types in iOS and Safari
  // 2. Change font properties to `inherit` in Safari
  #{$parent-selector} ::-webkit-file-upload-button {
    -webkit-appearance: button; // 1
    font: inherit; // 2
  }

  // Remove the inner border and padding of focus outlines in Firefox
  #{$parent-selector} ::-moz-focus-inner {
    padding: 0;
    border-style: none;
  }

  //  Remove the focus outline in Firefox
  #{$parent-selector} :-moz-focusring {
    outline: none;
  }

  // Remove the additional :invalid styles in Firefox
  #{$parent-selector} :-moz-ui-invalid {
    box-shadow: none;
  }

  // Change the inconsistent appearance in IE (opinionated)
  #{$parent-selector} ::-ms-expand {
    display: none;
  }

  // Remove the border and padding in all browsers (opinionated)
  #{$parent-selector} [type="file"],
  #{$parent-selector} [type="range"] {
    padding: 0;
    border-width: 0;
  }

  // Pico
  // ––––––––––––––––––––

  // Force height for alternatives input types
  #{$parent-selector} input:not([type="checkbox"], [type="radio"], [type="range"]) {
    height: calc(
      (1rem * var(#{$css-var-prefix}line-height)) +
        (var(#{$css-var-prefix}form-element-spacing-vertical) * 2) +
        (var(#{$css-var-prefix}border-width) * 2)
    );
  }

  // Blocks, 100%
  #{$parent-selector} input:not([type="checkbox"], [type="radio"]) {
    width: 100%;
  }

  // Reset appearance (Not Checkboxes, Radios, Range and File)
  #{$parent-selector} input:not([type="checkbox"], [type="radio"], [type="range"], [type="file"]) {
    appearance: none;
    padding: var(#{$css-var-prefix}form-element-spacing-vertical)
      var(#{$css-var-prefix}form-element-spacing-horizontal);
  }

  // Commons styles
  #{$parent-selector} input {
    #{$css-var-prefix}background-color: var(#{$css-var-prefix}form-element-background-color);
    #{$css-var-prefix}border-color: var(#{$css-var-prefix}form-element-border-color);
    #{$css-var-prefix}color: var(#{$css-var-prefix}form-element-color);
    #{$css-var-prefix}box-shadow: none;
    border: var(#{$css-var-prefix}border-width) solid var(#{$css-var-prefix}border-color);
    border-radius: var(#{$css-var-prefix}border-radius);
    outline: none;
    background-color: var(#{$css-var-prefix}background-color);
    box-shadow: var(#{$css-var-prefix}box-shadow);
    color: var(#{$css-var-prefix}color);
    font-weight: var(#{$css-var-prefix}font-weight);

    @if $enable-transitions {
      transition:
        background-color var(#{$css-var-prefix}transition),
        border-color var(#{$css-var-prefix}transition),
        color var(#{$css-var-prefix}transition),
        box-shadow var(#{$css-var-prefix}transition);
    }
  }

  // Active & Focus
  #{$parent-selector}
    input:not(
      [type="submit"],
      [type="button"],
      [type="reset"],
      [type="checkbox"],
      [type="radio"],
      [readonly]
    ) {
    &:is(:active, :focus) {
      #{$css-var-prefix}background-color: var(
        #{$css-var-prefix}form-element-active-background-color
      );
    }
  }

  // Active & Focus
  #{$parent-selector}
    input:not([type="submit"], [type="button"], [type="reset"], [role="switch"], [readonly]) {
    &:is(:active, :focus) {
      #{$css-var-prefix}border-color: var(#{$css-var-prefix}form-element-active-border-color);
    }
  }

  // Focus
  #{$parent-selector}
    input:not(
      [type="submit"],
      [type="button"],
      [type="reset"],
      [type="range"],
      [type="file"],
      [readonly]
    ) {
    &:focus {
      #{$css-var-prefix}box-shadow: 0
        0
        0
        var(#{$css-var-prefix}outline-width)
        var(#{$css-var-prefix}form-element-focus-color);
    }
  }

  // Disabled
  #{$parent-selector} input:not([type="submit"], [type="button"], [type="reset"])[disabled],
  #{$parent-selector}
    :where(fieldset[disabled])
    :is(input:not([type="submit"], [type="button"], [type="reset"]), select, textarea) {
    opacity: var(#{$css-var-prefix}form-element-disabled-opacity);
    pointer-events: none;
  }

  #{$parent-selector} label[aria-disabled="true"] input[disabled] {
    opacity: 1;
  }

  // Aria-invalid
  #{$parent-selector} :where(input, select, textarea) {
    &:not(
        [type="checkbox"],
        [type="radio"],
        [type="date"],
        [type="datetime-local"],
        [type="month"],
        [type="time"],
        [type="week"],
        [type="range"]
      ) {
      &[aria-invalid] {
        @if $enable-important {
          padding-right: calc(
            var(#{$css-var-prefix}form-element-spacing-horizontal) + 1.5rem
          ) !important;
          padding-left: var(#{$css-var-prefix}form-element-spacing-horizontal);
          padding-inline-start: var(#{$css-var-prefix}form-element-spacing-horizontal) !important;
          padding-inline-end: calc(
            var(#{$css-var-prefix}form-element-spacing-horizontal) + 1.5rem
          ) !important;
        } @else {
          padding-right: calc(var(#{$css-var-prefix}form-element-spacing-horizontal) + 1.5rem);
          padding-left: var(#{$css-var-prefix}form-element-spacing-horizontal);
          padding-inline-start: var(#{$css-var-prefix}form-element-spacing-horizontal);
          padding-inline-end: calc(var(#{$css-var-prefix}form-element-spacing-horizontal) + 1.5rem);
        }
        background-position: center right 0.75rem;
        background-size: 1rem auto;
        background-repeat: no-repeat;
      }

      &[aria-invalid="false"]:not(select) {
        background-image: var(#{$css-var-prefix}icon-valid);
      }

      &[aria-invalid="true"]:not(select) {
        background-image: var(#{$css-var-prefix}icon-invalid);
      }
    }

    &[aria-invalid="false"] {
      #{$css-var-prefix}border-color: var(#{$css-var-prefix}form-element-valid-border-color);

      &:is(:active, :focus) {
        @if $enable-important {
          #{$css-var-prefix}border-color: var(
            #{$css-var-prefix}form-element-valid-active-border-color
          ) !important;

          &:not([type="checkbox"], [type="radio"]) {
            #{$css-var-prefix}box-shadow: 0
              0
              0
              var(#{$css-var-prefix}outline-width)
              var(#{$css-var-prefix}form-element-valid-focus-color) !important;
          }
        } @else {
          #{$css-var-prefix}border-color: var(
            #{$css-var-prefix}form-element-valid-active-border-color
          );

          &:not([type="checkbox"], [type="radio"]) {
            #{$css-var-prefix}box-shadow: 0
              0
              0
              var(#{$css-var-prefix}outline-width)
              var(#{$css-var-prefix}form-element-valid-focus-color);
          }
        }
      }
    }

    &[aria-invalid="true"] {
      #{$css-var-prefix}border-color: var(#{$css-var-prefix}form-element-invalid-border-color);

      &:is(:active, :focus) {
        @if $enable-important {
          #{$css-var-prefix}border-color: var(
            #{$css-var-prefix}form-element-invalid-active-border-color
          ) !important;

          &:not([type="checkbox"], [type="radio"]) {
            #{$css-var-prefix}box-shadow: 0
              0
              0
              var(#{$css-var-prefix}outline-width)
              var(#{$css-var-prefix}form-element-invalid-focus-color) !important;
          }
        } @else {
          #{$css-var-prefix}border-color: var(
            #{$css-var-prefix}form-element-invalid-active-border-color
          );

          &:not([type="checkbox"], [type="radio"]) {
            #{$css-var-prefix}box-shadow: 0
              0
              0
              var(#{$css-var-prefix}outline-width)
              var(#{$css-var-prefix}form-element-invalid-focus-color);
          }
        }
      }
    }
  }

  [dir="rtl"] {
    #{$parent-selector} :where(input, select, textarea) {
      &:not([type="checkbox"], [type="radio"]) {
        &:is([aria-invalid], [aria-invalid="true"], [aria-invalid="false"]) {
          background-position: center left 0.75rem;
        }
      }
    }
  }

  // Placeholder
  #{$parent-selector} input::placeholder,
  #{$parent-selector} input::-webkit-input-placeholder {
    color: var(#{$css-var-prefix}form-element-placeholder-color);
    opacity: 1;
  }

  // Margin bottom (Not Checkboxes and Radios)
  #{$parent-selector} input:not([type="checkbox"], [type="radio"]) {
    margin-bottom: var(#{$css-var-prefix}spacing);
  }

  // Styles for Input inside a label
  #{$parent-selector} label {
    > :where(input, select, textarea) {
      margin-top: calc(var(#{$css-var-prefix}spacing) * 0.25);
    }
  }
}
